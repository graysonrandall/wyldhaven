<!DOCTYPE html>
<html>
<body>

<label for="theme">Select color: </label>
<select id="theme">
  <option value="">-Select one-</option>
  <option value="blue">Blue</option>
  <option value="red">Red</option>
</select>

<h2>Enter your monthly payment and calculate your 12 month interest total</h2>

<input type="number" id="monthly-input">

<button onclick="calculate()">Calculate</button>

<p>Your total payment = <span id="rounded-number"></span>.</p>

<p>Your exact payment = <span id="exact-number"></span>.</p>

<p>You are <b><span id="insurance"></span></b> by your insurance as of <span id="currentday"></span>.</p>

<p>If you have questions you can call us at 815-600-6611 from 9am-5pm, Monday - Friday</p>

<p>The office is currently <b><span id="office"></span></b></p>

<hr>


<p><span id="state"></span></p>

<label for="city-input">Search for your city: </label>
<input type="text" id="city-input">

<button id="citysearch">Search</button>

<p class="citydisplay"></p>


<hr>

<p>Can I be on my parents plan?</p>

<input type="number" id="age-input">
<p id="agePlan"></p>


<p id="timer">600</p>

<script> //timeout function

let states = ['Illinois', 'Wisconsin', 'New York', 'Mass', 'California'];

window.onload = function() {
  let statesSentence = document.getElementById("state").innerHTML = ' or ';
  let info = 'Are you in ';

  for (let i = 0; i < states.length; i++ ) {

    if (i === states.length - 1 ) {
      info += states[i] + ', USA?';
    } else {
      info += states[i] + statesSentence + ' ';
    }
  }

  document.getElementById("state").innerHTML = info;
  console.log(info);

}

  let input = document.getElementById("age-input");
  let insPlan = document.getElementById("agePlan");

  input.onchange = function() {
    let age = input.value;
    console.log(age);
    let parentsPlan = (age >= 18) ? "Yes" : "No";
    insPlan.innerHTML = parentsPlan;
  }



  let timeleft = 600;

  let intervalTimer = setInterval(function() {

    document.onmousemove = function() {
      timeleft = 600;
      document.getElementById('timer').innerHTML = timeleft;
    }

    --timeleft;
    document.getElementById('timer').innerHTML = timeleft;

    if (timeleft <= 0) {
      document.getElementById('timer').innerHTML = 0;
      alert("Please keep this session active");
    }
  }, 1000);

function calculate() {
  let amounts = 12;
  const INTEREST = .12;
  let payment = document.getElementById("monthly-input").value;
  let pretotal = payment * INTEREST;
  let total = (+pretotal + +payment) * amounts;
  let date = new Date();


  document.getElementById("rounded-number").innerHTML = total.toFixed(0);
  document.getElementById("exact-number").innerHTML = total;

  if (total <= 1400 || total >= 1000000) {
    document.getElementById("insurance").innerHTML = 'covered';
    document.getElementById("currentday").innerHTML = date.toLocaleDateString("en-US");
  } else {
    document.getElementById("insurance").innerHTML = 'not covered';
    document.getElementById("currentday").innerHTML = date.toLocaleDateString("en-US");
  }
}

let officedate = new Date();
let officehours = officedate.getHours();
let officeday = officedate.getDay();

if (officehours >= 8 && officehours <= 16 && officeday >= 1 && officeday <= 5 ) {
  document.getElementById("office").innerHTML = "open";
} else {
  document.getElementById("office").innerHTML = "closed";
}

let theme = document.getElementById("theme");
let header = document.querySelector("h2");

function update(textColor) {
  header.style.color = textColor;
}

theme.onchange = function() {
  if (theme.value === 'red') {
    update('red');
  } else if (theme.value === 'blue') {
    update('blue');
  } else {
    update('black');
  }
}


let cityOptions = ['Chicago', 'Madison', 'New York', 'San Franciso', 'Los Angeles', 'Boston'];
let cityInput = document.getElementById("city-input");
let cityBtn = document.getElementById("citysearch");
let cityPara = document.querySelector("citydisplay");

cityBtn.addEventListener('click', function() {
  let searchName = cityInput.value;
  cityInput.value = '';
  cityInput.focus();

  for (i = 0; i < cityOptions.length; i++) {
    if (cityOptions[i] === searchName ) {
      cityPara.textContent = searchName + ' is a serviced city. Congrats!';
    } else {
      cityPara.textContent = searchName + ' is not a serviced city. Sorry!';
    }
  }


});

</script>

</body>
</html>
