<!DOCTYPE html>
<html>

<head>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

</head>

<body>

<!-- <div>

</div> -->


<script>

let body = document.querySelector('body');
let input = document.createElement('input');
let att = document.createAttribute('type');
let max = document.createAttribute('max');
let button = document.createElement('button');
let para = document.createElement('p');

body.appendChild(input);
body.appendChild(button);
body.appendChild(para);

button.textContent = 'Submit';
att.value = 'number';
max.value = '11';
input.setAttributeNode(att);
input.setAttributeNode(max);
button.classList.add('calc-button');
para.classList.add('result');

let dbInput = document.querySelector('input');
let subButton = document.querySelector('.calc-button');

function loadTitle(x) {
  console.log(x);
  let url = 'https://jsonplaceholder.typicode.com/albums' + '?userId=' + x;
  console.log(url);
  $.ajax({
    url: url,
    type: 'GET',
    success: function(data) {
      var obj = JSON.stringify(data);
      var objParse = JSON.parse(obj);
      console.log(objParse);

      document.querySelector('p').textContent = '';
      
      for (var i = 0; i < objParse.length; i++) {
        let text = objParse[i].title + ', ';
        document.querySelector('p').insertAdjacentHTML('beforeend', text);
      }
    },
    error: function(data) {
      alert('Error with data = ' + data);
    }
  });
}

$(subButton).click(function() {
  let query = dbInput.value;
  console.log(query);
  loadTitle(query);

});


</script>

</body>

</html>
